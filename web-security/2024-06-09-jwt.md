# 2024-06-09: JWT (JSON Web Token)

## JWT (JSON Web Token)

JWT(JSON Web Token)는 JSON 객체를 사용하여 정보를 안전하게 전송하기 위한 개방형 표준(RFC 7519)입니다. 주로 인증 및 정보 교환에 사용됩니다.

- **설명**: JWT는 서명된 토큰으로, 토큰 내의 정보가 조작되지 않았음을 보장합니다. 이를 통해 서버 간에 또는 서버와 클라이언트 간에 신뢰할 수 있는 정보 교환이 가능합니다. JWT는 일반적으로 헤더(Header), 페이로드(Payload), 서명(Signature)으로 구성됩니다.

- **주요 개념**:
  - **헤더**: 토큰의 유형과 해싱 알고리즘을 지정합니다. 예를 들어, 유형이 JWT이고 알고리즘이 HMAC SHA256인 경우:
    ```json
    {
      "alg": "HS256",
      "typ": "JWT"
    }
    ```
  - **페이로드**: 토큰에 포함된 클레임(Claims)을 담고 있으며, 클레임은 사용자 및 기타 데이터에 대한 정보를 포함합니다. 예를 들어, 사용자 ID와 토큰 발급 시간을 나타낼 수 있습니다:
    ```json
    {
      "sub": "1234567890",
      "name": "John Doe",
      "iat": 1516239022
    }
    ```
  - **서명**: 헤더와 페이로드를 인코딩하고, 지정된 비밀 키를 사용하여 생성된 서명입니다. 서명은 JWT의 무결성을 보장합니다.

- **JWT의 구성 요소**:
  - **헤더(Header)**: 토큰의 메타데이터를 포함합니다.
  - **페이로드(Payload)**: 클레임을 포함하며, 사용자와 관련된 데이터를 담고 있습니다.
  - **서명(Signature)**: 토큰의 무결성을 검증하는 데 사용됩니다.

- **JWT의 작동 원리**:
  1. **토큰 생성**: 서버는 사용자 인증 후, 사용자 정보를 담은 JWT를 생성합니다.
  2. **토큰 전송**: 생성된 JWT를 클라이언트에 전송합니다. 클라이언트는 이 토큰을 저장하고 이후 요청 시 사용합니다.
  3. **토큰 사용**: 클라이언트는 서버에 요청할 때 JWT를 포함하여 전송합니다. 서버는 이 토큰을 검증하여 요청을 처리합니다.
  4. **토큰 검증**: 서버는 수신한 JWT의 서명을 검증하여 토큰이 변경되지 않았음을 확인합니다. 또한, 토큰의 유효 기간을 확인하여 만료되지 않았음을 확인합니다.

- **JWT의 이점**:
  - **자체 포함된 정보**: JWT는 자체적으로 필요한 모든 정보를 포함하므로, 별도의 데이터베이스 조회 없이도 토큰만으로 사용자 인증 및 권한 부여가 가능합니다.
  - **확장성**: 다양한 환경에서 쉽게 사용할 수 있으며, 웹, 모바일, 서버 간 통신 등 여러 시나리오에 적용할 수 있습니다.
  - **보안 강화**: 서명된 토큰으로, 토큰 내의 정보가 변조되지 않았음을 보장합니다.

- **보안 측면에서의 고려사항**:
  - **비밀 키 관리**: 서명에 사용되는 비밀 키를 안전하게 관리해야 합니다. 비밀 키가 유출되면 토큰을 위조할 수 있습니다.
  - **유효 기간 설정**: 토큰의 유효 기간을 적절히 설정하여 만료된 토큰이 사용되지 않도록 해야 합니다.
  - **HTTPS 사용**: JWT는 기본적으로 암호화되지 않으므로, HTTPS를 사용하여 전송 중 데이터를 보호해야 합니다.
  - **클레임 검증**: 토큰을 수신할 때 클레임을 검증하여, 필요한 권한을 확인하고 토큰의 무결성을 검증해야 합니다.
